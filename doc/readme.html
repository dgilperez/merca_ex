<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.39.3">
    <meta name="project" content="MercaEx v0.1.0">


    <title>MercaEx — MercaEx v0.1.0</title>

    <link rel="stylesheet" href="dist/html-elixir-VYWJUHZE.css" />

    <script defer src="dist/sidebar_items-C9151E8B.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-XBCM4BHM.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="https://github.com/dgilperez/merca_ex" class="sidebar-projectName" translate="no">
MercaEx
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.1.0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-extra" id="main" data-type="extras">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of MercaEx</span>
            <div class="search-input-wrapper">
              <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
              <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
                <i class="ri-close-line ri-lg" title="Cancel search"></i>
              </button>
            </div>
          </label>
        </form>
        <div class="autocomplete">
        </div>
        <div class="engine-selector" data-multiple="false">
          <button type="button" class="engine-button" aria-label="Select search engine" aria-haspopup="true" aria-expanded="false">
            <i class="ri-search-2-line" aria-hidden="true"></i>
            <span class="engine-name">Default</span>
            <i class="ri-arrow-down-s-line" aria-hidden="true"></i>
          </button>
          <div class="engine-dropdown" hidden role="menu">

              <button type="button"
                      class="engine-option"
                      data-engine-url="search.html?q="
                      role="menuitemradio"
                      aria-checked="true">
                <span class="name">Default</span>
                <span class="help">In-browser search</span>
              </button>

          </div>
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>MercaEx</h1>


      <a href="https://github.com/dgilperez/merca_ex/blob/v0.1.0/README.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


<p><a href="https://hex.pm/packages/merca_ex"><img src="https://img.shields.io/hexpm/v/merca_ex.svg" alt="Hex.pm"/></a>
<a href="https://hexdocs.pm/merca_ex"><img src="https://img.shields.io/badge/hex-docs-blue.svg" alt="Docs"/></a>
<a href="https://github.com/dgilperez/merca_ex/actions"><img src="https://github.com/dgilperez/merca_ex/actions/workflows/ci.yml/badge.svg" alt="CI"/></a></p><p>Elixir client for the Mercadona API.</p><h2 id="installation" class="section-heading"><a href="#installation" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Installation</span></h2><p>Add <code class="inline">merca_ex</code> to your list of dependencies in <code class="inline">mix.exs</code>:</p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">deps</span><span class="w"> </span><span class="k" data-group-id="9905859235-1">do</span><span class="w">
  </span><span class="p" data-group-id="9905859235-2">[</span><span class="w">
    </span><span class="p" data-group-id="9905859235-3">{</span><span class="ss">:merca_ex</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 0.1.0&quot;</span><span class="p" data-group-id="9905859235-3">}</span><span class="w">
  </span><span class="p" data-group-id="9905859235-2">]</span><span class="w">
</span><span class="k" data-group-id="9905859235-1">end</span></code></pre><h2 id="usage" class="section-heading"><a href="#usage" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Usage</span></h2><h3 id="list-categories" class="section-heading"><a href="#list-categories" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">List Categories</span></h3><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="4755887494-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">categories</span><span class="p" data-group-id="4755887494-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">MercaEx</span><span class="o">.</span><span class="n">categories</span><span class="p" data-group-id="4755887494-2">(</span><span class="p" data-group-id="4755887494-2">)</span><span class="w">

</span><span class="nc">Enum</span><span class="o">.</span><span class="n">each</span><span class="p" data-group-id="4755887494-3">(</span><span class="n">categories</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="4755887494-4">fn</span><span class="w"> </span><span class="n">cat</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="4755887494-5">(</span><span class="s">&quot;</span><span class="si" data-group-id="4755887494-6">#{</span><span class="n">cat</span><span class="o">.</span><span class="n">id</span><span class="si" data-group-id="4755887494-6">}</span><span class="s">: </span><span class="si" data-group-id="4755887494-7">#{</span><span class="n">cat</span><span class="o">.</span><span class="n">name</span><span class="si" data-group-id="4755887494-7">}</span><span class="s">&quot;</span><span class="p" data-group-id="4755887494-5">)</span><span class="w">
  </span><span class="nc">Enum</span><span class="o">.</span><span class="n">each</span><span class="p" data-group-id="4755887494-8">(</span><span class="n">cat</span><span class="o">.</span><span class="n">subcategories</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="4755887494-9">fn</span><span class="w"> </span><span class="n">sub</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="4755887494-10">(</span><span class="s">&quot;  </span><span class="si" data-group-id="4755887494-11">#{</span><span class="n">sub</span><span class="o">.</span><span class="n">id</span><span class="si" data-group-id="4755887494-11">}</span><span class="s">: </span><span class="si" data-group-id="4755887494-12">#{</span><span class="n">sub</span><span class="o">.</span><span class="n">name</span><span class="si" data-group-id="4755887494-12">}</span><span class="s">&quot;</span><span class="p" data-group-id="4755887494-10">)</span><span class="w">
  </span><span class="k" data-group-id="4755887494-9">end</span><span class="p" data-group-id="4755887494-8">)</span><span class="w">
</span><span class="k" data-group-id="4755887494-4">end</span><span class="p" data-group-id="4755887494-3">)</span></code></pre><h3 id="get-products-by-category" class="section-heading"><a href="#get-products-by-category" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Get Products by Category</span></h3><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="4978220932-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">products</span><span class="p" data-group-id="4978220932-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">MercaEx</span><span class="o">.</span><span class="n">products</span><span class="p" data-group-id="4978220932-2">(</span><span class="mi">113</span><span class="p" data-group-id="4978220932-2">)</span><span class="w">

</span><span class="nc">Enum</span><span class="o">.</span><span class="n">each</span><span class="p" data-group-id="4978220932-3">(</span><span class="n">products</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="4978220932-4">fn</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="4978220932-5">(</span><span class="s">&quot;</span><span class="si" data-group-id="4978220932-6">#{</span><span class="n">product</span><span class="o">.</span><span class="n">name</span><span class="si" data-group-id="4978220932-6">}</span><span class="s"> - </span><span class="si" data-group-id="4978220932-7">#{</span><span class="n">product</span><span class="o">.</span><span class="n">price</span><span class="si" data-group-id="4978220932-7">}</span><span class="s">€&quot;</span><span class="p" data-group-id="4978220932-5">)</span><span class="w">
</span><span class="k" data-group-id="4978220932-4">end</span><span class="p" data-group-id="4978220932-3">)</span></code></pre><h3 id="get-product-details" class="section-heading"><a href="#get-product-details" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Get Product Details</span></h3><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="1943122317-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">product</span><span class="p" data-group-id="1943122317-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">MercaEx</span><span class="o">.</span><span class="n">product</span><span class="p" data-group-id="1943122317-2">(</span><span class="s">&quot;12345&quot;</span><span class="p" data-group-id="1943122317-2">)</span><span class="w">

</span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="1943122317-3">(</span><span class="s">&quot;&quot;&quot;
Name: </span><span class="si" data-group-id="1943122317-4">#{</span><span class="n">product</span><span class="o">.</span><span class="n">name</span><span class="si" data-group-id="1943122317-4">}</span><span class="s">
Price: </span><span class="si" data-group-id="1943122317-5">#{</span><span class="n">product</span><span class="o">.</span><span class="n">price</span><span class="si" data-group-id="1943122317-5">}</span><span class="s">€
EAN: </span><span class="si" data-group-id="1943122317-6">#{</span><span class="n">product</span><span class="o">.</span><span class="n">ean</span><span class="si" data-group-id="1943122317-6">}</span><span class="s">
Description: </span><span class="si" data-group-id="1943122317-7">#{</span><span class="n">product</span><span class="o">.</span><span class="n">description</span><span class="si" data-group-id="1943122317-7">}</span><span class="s">
&quot;&quot;&quot;</span><span class="p" data-group-id="1943122317-3">)</span></code></pre><h3 id="search-products" class="section-heading"><a href="#search-products" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Search Products</span></h3><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="2128535673-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">results</span><span class="p" data-group-id="2128535673-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">MercaEx</span><span class="o">.</span><span class="n">search</span><span class="p" data-group-id="2128535673-2">(</span><span class="s">&quot;leche&quot;</span><span class="p" data-group-id="2128535673-2">)</span><span class="w">

</span><span class="c1"># With options</span><span class="w">
</span><span class="p" data-group-id="2128535673-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">results</span><span class="p" data-group-id="2128535673-3">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">MercaEx</span><span class="o">.</span><span class="n">search</span><span class="p" data-group-id="2128535673-4">(</span><span class="s">&quot;leche&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">warehouse</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mad1&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="2128535673-4">)</span></code></pre><h2 id="data-types" class="section-heading"><a href="#data-types" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Data Types</span></h2><h3 id="category" class="section-heading"><a href="#category" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Category</span></h3><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="5553208042-1">%</span><span class="nc" data-group-id="5553208042-1">MercaEx.Category</span><span class="p" data-group-id="5553208042-1">{</span><span class="w">
  </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="mi">112</span><span class="p">,</span><span class="w">
  </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Aceite, especias y salsas&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">subcategories</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5553208042-2">[</span><span class="w">
    </span><span class="p" data-group-id="5553208042-3">%</span><span class="nc" data-group-id="5553208042-3">MercaEx.Category</span><span class="p" data-group-id="5553208042-3">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="mi">113</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Aceite de oliva&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">subcategories</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5553208042-4">[</span><span class="p" data-group-id="5553208042-4">]</span><span class="p" data-group-id="5553208042-3">}</span><span class="w">
  </span><span class="p" data-group-id="5553208042-2">]</span><span class="w">
</span><span class="p" data-group-id="5553208042-1">}</span></code></pre><h3 id="product" class="section-heading"><a href="#product" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Product</span></h3><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="2598721393-1">%</span><span class="nc" data-group-id="2598721393-1">MercaEx.Product</span><span class="p" data-group-id="2598721393-1">{</span><span class="w">
  </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;12345&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Aceite de oliva virgen extra&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">price</span><span class="p">:</span><span class="w"> </span><span class="mf">5.99</span><span class="p">,</span><span class="w">
  </span><span class="ss">reference_price</span><span class="p">:</span><span class="w"> </span><span class="mf">5.99</span><span class="p">,</span><span class="w">
  </span><span class="ss">reference_format</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1 L&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">ean</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8480000123456&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">photo_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://...&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Aceite de primera calidad&quot;</span><span class="w">
</span><span class="p" data-group-id="2598721393-1">}</span></code></pre><h2 id="configuration" class="section-heading"><a href="#configuration" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Configuration</span></h2><p>For testing, you can configure a mock HTTP client:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># config/test.exs</span><span class="w">
</span><span class="n">config</span><span class="w"> </span><span class="ss">:merca_ex</span><span class="p">,</span><span class="w"> </span><span class="ss">:http_client</span><span class="p">,</span><span class="w"> </span><span class="nc">MercaEx.HTTPClientMock</span></code></pre><h2 id="api-reference" class="section-heading"><a href="#api-reference" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">API Reference</span></h2><p>MercaEx wraps the undocumented Mercadona API:</p><ul><li>Base URL: <code class="inline">https://tienda.mercadona.es/api</code></li><li>Categories: <code class="inline">GET /categories/</code></li><li>Category products: <code class="inline">GET /categories/{id}/</code></li><li>Product details: <code class="inline">GET /products/{id}/</code></li><li>Search: Uses Algolia (see below)</li></ul><h3 id="search-api-algolia" class="section-heading"><a href="#search-api-algolia" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Search API (Algolia)</span></h3><p>Mercadona uses <a href="https://www.algolia.com/">Algolia</a> for product search. The Algolia credentials
are public (embedded in Mercadona's web frontend JavaScript) and read-only.</p><pre><code class="makeup elixir" translate="no"><span class="nc">App</span><span class="w"> </span><span class="ss">ID</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="nc">UZJKL1DJ0</span><span class="w">
</span><span class="nc">API</span><span class="w"> </span><span class="ss">Key</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="n">d8f2e39e90df472b4f2e559a116fe17</span><span class="w"> </span><span class="p" data-group-id="5801477524-1">(</span><span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="p" data-group-id="5801477524-1">)</span><span class="w">
</span><span class="ss">Index</span><span class="p">:</span><span class="w"> </span><span class="n">products_prod_</span><span class="p" data-group-id="5801477524-2">{</span><span class="n">warehouse</span><span class="p" data-group-id="5801477524-2">}</span><span class="c">_es</span></code></pre><h4>Available Warehouses</h4><table><thead><tr><th style="text-align: left;">Code</th><th style="text-align: left;">Region</th><th style="text-align: left;">Notes</th></tr></thead><tbody><tr><td style="text-align: left;"><code class="inline">mad1</code></td><td style="text-align: left;">Madrid</td><td style="text-align: left;">Default, recommended</td></tr><tr><td style="text-align: left;"><code class="inline">mad2</code></td><td style="text-align: left;">Madrid</td><td style="text-align: left;">Alternative, sometimes different prices</td></tr><tr><td style="text-align: left;"><code class="inline">bcn1</code></td><td style="text-align: left;">Barcelona</td><td style="text-align: left;"></td></tr><tr><td style="text-align: left;"><code class="inline">vlc1</code></td><td style="text-align: left;">Valencia</td><td style="text-align: left;"></td></tr><tr><td style="text-align: left;"><code class="inline">vlc2</code></td><td style="text-align: left;">Valencia</td><td style="text-align: left;">Limited catalog</td></tr><tr><td style="text-align: left;"><code class="inline">svq1</code></td><td style="text-align: left;">Sevilla</td><td style="text-align: left;"></td></tr><tr><td style="text-align: left;"><code class="inline">alc1</code></td><td style="text-align: left;">Alicante</td><td style="text-align: left;"></td></tr></tbody></table><p><strong>Note</strong>: Not all regions have dedicated warehouse codes. Users in regions like Galicia
(A Coruña, Vigo, etc.) should use <code class="inline">mad1</code> as it has the most complete catalog.</p><h4>References</h4><p>This approach was documented by reverse-engineering Mercadona's web application:</p><ul><li><a href="https://github.com/jtayped/mercapy">mercapy</a> - Python client (MIT License)</li><li><a href="https://gist.github.com/mdelapenya/7a7bf8e6f22d86d28ad3b5e3630b1343">Mercadona API Gist</a></li></ul><h2 id="disclaimer" class="section-heading"><a href="#disclaimer" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Disclaimer</span></h2><p>This library interacts with Mercadona's undocumented public API. It is not affiliated with,
endorsed by, or connected to Mercadona S.A. in any way. Use at your own risk. The API
may change without notice.</p><h2 id="license" class="section-heading"><a href="#license" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">License</span></h2><p>MIT License. See <a href="LICENSE">LICENSE</a> for details.</p>

</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

  </div>
  <div class="bottom-actions-item">

  </div>
</div>
    <footer class="footer">

        <p>

            <span class="line">
              <a href="https://hex.pm/packages/merca_ex/0.1.0" class="footer-hex-package">Hex Package</a>

              <a href="https://preview.hex.pm/preview/merca_ex/0.1.0">Hex Preview</a>

                (<a href="https://preview.hex.pm/preview/merca_ex/0.1.0/show/README.md">current file</a>)

            </span>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Go to package docs">
              Go to package docs
            </button>

              <a href="MercaEx.epub" title="ePub version">
                Download ePub version
              </a>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.39.3) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>


    </footer>
  </div>
</main>
</div>

  </body>
</html>
